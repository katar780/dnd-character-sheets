<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–°–æ–∑–¥–∞–Ω–∏–µ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="dashboard.css">
</head>
<body>
    <div class="dashboard-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="user-avatar">
                    üë§
                </div>
                <div class="user-info">
                    <h3 id="currentUser">...</h3>
                    <p>–°–æ–∑–¥–∞–Ω–∏–µ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞</p>
                </div>
            </div>
            
            <nav class="sidebar-nav">
                <ul>
                    <li>
                        <a href="dashboard.html">
                            <span class="nav-icon">‚Üê</span>
                            <span>–ù–∞–∑–∞–¥ –≤ –ø–∞–Ω–µ–ª—å</span>
                        </a>
                    </li>
                </ul>
            </nav>
        </aside>
        
        <!-- Main Content -->
        <main class="dashboard-main">
            <header class="dashboard-header">
                <div class="header-left">
                    <h1>–°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞</h1>
                    <p>–®–∞–≥ <span id="currentStep">1</span> –∏–∑ <span id="totalSteps">4</span></p>
                </div>
                <div class="header-right">
                    <button class="btn btn-secondary" id="saveDraftBtn">
                        üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —á–µ—Ä–Ω–æ–≤–∏–∫
                    </button>
                </div>
            </header>
            
            <!-- –ü—Ä–æ–≥—Ä–µ—Å—Å -->
            <div class="creation-progress">
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill" style="width: 25%;"></div>
                </div>
                <div class="progress-steps">
                    <div class="step active" data-step="1">1. –û—Å–Ω–æ–≤–Ω–æ–µ</div>
                    <div class="step" data-step="2">2. –í–Ω–µ—à–Ω–æ—Å—Ç—å</div>
                    <div class="step" data-step="3">3. –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏</div>
                    <div class="step" data-step="4">4. –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ</div>
                </div>
            </div>
            
            <!-- –§–æ—Ä–º–∞ -->
            <form id="characterForm" class="character-form">
                <!-- –®–∞–≥ 1: –û—Å–Ω–æ–≤–Ω–æ–µ -->
                <div class="form-step active" id="step1">
                    <h2>–û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h2>
                    
                    <div class="form-group">
                        <label for="charName">–ò–º—è –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ *</label>
                        <input type="text" id="charName" name="charName" required 
                               placeholder="–í–≤–µ–¥–∏—Ç–µ –∏–º—è –ø–µ—Ä—Å–æ–Ω–∞–∂–∞" maxlength="50">
                        <small>–ú–∞–∫—Å–∏–º—É–º 50 —Å–∏–º–≤–æ–ª–æ–≤. –ò–º—è –±—É–¥–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –≤ —Å–∏—Å—Ç–µ–º–µ.</small>
                    </div>
                    
                    <div class="form-group">
                        <label for="charRace">–†–∞—Å–∞</label>
                        <select id="charRace" name="charRace">
                            <option value="human">–ß–µ–ª–æ–≤–µ–∫</option>
                            <option value="elf">–≠–ª—å—Ñ</option>
                            <option value="dwarf">–ì–Ω–æ–º</option>
                            <option value="orc">–û—Ä–∫</option>
                            <option value="custom">–î—Ä—É–≥–∞—è</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="charClass">–ö–ª–∞—Å—Å</label>
                        <select id="charClass" name="charClass">
                            <option value="warrior">–í–æ–∏–Ω</option>
                            <option value="mage">–ú–∞–≥</option>
                            <option value="rogue">–†–∞–∑–±–æ–π–Ω–∏–∫</option>
                            <option value="cleric">–ñ—Ä–µ—Ü</option>
                            <option value="custom">–î—Ä—É–≥–æ–µ</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="charBio">–ë–∏–æ–≥—Ä–∞—Ñ–∏—è</label>
                        <textarea id="charBio" name="charBio" rows="4" 
                                  placeholder="–†–∞—Å—Å–∫–∞–∂–∏—Ç–µ –∏—Å—Ç–æ—Ä–∏—é –≤–∞—à–µ–≥–æ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞..."></textarea>
                    </div>
                </div>
                
                <!-- –®–∞–≥ 2: –í–Ω–µ—à–Ω–æ—Å—Ç—å -->
                <div class="form-step" id="step2">
                    <h2>–í–Ω–µ—à–Ω–æ—Å—Ç—å</h2>
                    <!-- –ö–æ–Ω—Ç–µ–Ω—Ç –¥–ª—è —à–∞–≥–∞ 2 -->
                    <p>–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤–Ω–µ—à–Ω–æ—Å—Ç–∏ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞...</p>
                </div>
                
                <!-- –®–∞–≥ 3: –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ -->
                <div class="form-step" id="step3">
                    <h2>–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏</h2>
                    <!-- –ö–æ–Ω—Ç–µ–Ω—Ç –¥–ª—è —à–∞–≥–∞ 3 -->
                    <p>–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫...</p>
                </div>
                
                <!-- –®–∞–≥ 4: –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ -->
                <div class="form-step" id="step4">
                    <h2>–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ</h2>
                    <!-- –ö–æ–Ω—Ç–µ–Ω—Ç –¥–ª—è —à–∞–≥–∞ 4 -->
                    <p>–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö...</p>
                </div>
                
                <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è -->
                <div class="form-navigation">
                    <button type="button" class="btn btn-secondary" id="prevBtn" disabled>
                        ‚Üê –ù–∞–∑–∞–¥
                    </button>
                    <button type="button" class="btn btn-primary" id="nextBtn">
                        –î–∞–ª–µ–µ ‚Üí
                    </button>
                    <button type="submit" class="btn btn-success" id="submitBtn" style="display: none;">
                        ‚úÖ –°–æ–∑–¥–∞—Ç—å –ø–µ—Ä—Å–æ–Ω–∞–∂–∞
                    </button>
                </div>
            </form>
            
            <!-- –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä -->
            <div class="character-preview">
                <h3>–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä</h3>
                <div class="preview-card" id="previewCard">
                    <div class="preview-avatar">ü¶∏‚Äç‚ôÇÔ∏è</div>
                    <div class="preview-info">
                        <h4 id="previewName">–ò–º—è –ø–µ—Ä—Å–æ–Ω–∞–∂–∞</h4>
                        <p id="previewRaceClass">–†–∞—Å–∞ ‚Ä¢ –ö–ª–∞—Å—Å</p>
                        <p id="previewBio">–ë–∏–æ–≥—Ä–∞—Ñ–∏—è...</p>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Firebase -->
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
    
    <!-- –ù–∞—à–∏ —Å–∫—Ä–∏–ø—Ç—ã -->
    <script src="firebase-config.js"></script>
    <script src="auth.js"></script>
    <script src="character-create.js"></script>
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é
            firebase.auth().onAuthStateChanged(function(user) {
                if (!user) {
                    window.location.href = 'login.html';
                } else {
                    document.getElementById('currentUser').textContent = user.displayName || user.email;
                    initCharacterCreation();
                }
            });
        });
    </script>
</body>
</html>
